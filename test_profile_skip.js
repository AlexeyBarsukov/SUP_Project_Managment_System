const pool = require('./src/db/connection');
const User = require('./src/db/models/User');

async function testProfileSkipBehavior() {
    try {
        console.log('=== –¢–ï–°–¢ –ü–û–í–ï–î–ï–ù–ò–Ø –ü–†–ò –ü–†–û–ü–£–°–ö–ï –ü–û–õ–ï–ô –ü–†–û–§–ò–õ–Ø ===\n');
        
        // –ü–æ–ª—É—á–∞–µ–º —Ç–µ—Å—Ç–æ–≤–æ–≥–æ –º–µ–Ω–µ–¥–∂–µ—Ä–∞
        const managers = await User.findVisibleByRole('manager');
        if (managers.length === 0) {
            console.log('‚ùå –ù–µ—Ç –º–µ–Ω–µ–¥–∂–µ—Ä–æ–≤ –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è');
            return;
        }
        
        const testManager = managers[0];
        console.log(`üë§ –¢–µ—Å—Ç–∏—Ä—É–µ–º –Ω–∞ –º–µ–Ω–µ–¥–∂–µ—Ä–µ: @${testManager.username}`);
        
        // –ü—Ä–æ–≤–µ—Ä—è–µ–º —Ç–µ–∫—É—â–∏–µ –¥–∞–Ω–Ω—ã–µ –ø—Ä–æ—Ñ–∏–ª—è
        console.log('\nüìã –¢–µ–∫—É—â–∏–π –ø—Ä–æ—Ñ–∏–ª—å:');
        console.log(`- –°–ø–µ—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è: ${testManager.specialization || '–Ω–µ —É–∫–∞–∑–∞–Ω–∞'}`);
        console.log(`- –û–ø—ã—Ç: ${testManager.experience || '–Ω–µ —É–∫–∞–∑–∞–Ω'}`);
        console.log(`- –ù–∞–≤—ã–∫–∏: ${testManager.skills || '–Ω–µ —É–∫–∞–∑–∞–Ω—ã'}`);
        console.log(`- –î–æ—Å—Ç–∏–∂–µ–Ω–∏—è: ${testManager.achievements || '–Ω–µ —É–∫–∞–∑–∞–Ω—ã'}`);
        console.log(`- –ó–∞—Ä–ø–ª–∞—Ç–∞: ${testManager.salary_range || '–Ω–µ —É–∫–∞–∑–∞–Ω–∞'}`);
        console.log(`- –ö–æ–Ω—Ç–∞–∫—Ç—ã: ${testManager.contacts || '–Ω–µ —É–∫–∞–∑–∞–Ω—ã'}`);
        
        // –°–∏–º—É–ª–∏—Ä—É–µ–º –¥–∞–Ω–Ω—ã–µ –ø—Ä–æ—Ñ–∏–ª—è –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è
        const testProfileData = {
            specialization: 'IT-–ø—Ä–æ–µ–∫—Ç—ã',
            experience: '3-5 –ª–µ—Ç',
            skills: ['Jira', 'Scrum', 'Python'],
            achievements: undefined, // –∏–∑–Ω–∞—á–∞–ª—å–Ω–æ –Ω–µ –æ–±—Ä–∞–±–æ—Ç–∞–Ω–æ
            salary_range: undefined, // –∏–∑–Ω–∞—á–∞–ª—å–Ω–æ –Ω–µ –æ–±—Ä–∞–±–æ—Ç–∞–Ω–æ
            contacts: undefined // –∏–∑–Ω–∞—á–∞–ª—å–Ω–æ –Ω–µ –æ–±—Ä–∞–±–æ—Ç–∞–Ω–æ
        };
        
        console.log('\nüß™ –°–∏–º—É–ª–∏—Ä—É–µ–º –∑–∞–ø–æ–ª–Ω–µ–Ω–∏–µ –ø—Ä–æ—Ñ–∏–ª—è —Å –ø—Ä–æ–ø—É—Å–∫–∞–º–∏:');
        console.log('1. –°–ø–µ—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è: ‚úÖ –∑–∞–ø–æ–ª–Ω–µ–Ω–∞');
        console.log('2. –û–ø—ã—Ç: ‚úÖ –∑–∞–ø–æ–ª–Ω–µ–Ω');
        console.log('3. –ù–∞–≤—ã–∫–∏: ‚úÖ –∑–∞–ø–æ–ª–Ω–µ–Ω—ã');
        console.log('4. –î–æ—Å—Ç–∏–∂–µ–Ω–∏—è: ‚è≠Ô∏è –±—É–¥–µ—Ç –ø—Ä–æ–ø—É—â–µ–Ω–æ');
        console.log('5. –ó–∞—Ä–ø–ª–∞—Ç–∞: ‚è≠Ô∏è –±—É–¥–µ—Ç –ø—Ä–æ–ø—É—â–µ–Ω–æ');
        console.log('6. –ö–æ–Ω—Ç–∞–∫—Ç—ã: ‚è≠Ô∏è –±—É–¥–µ—Ç –ø—Ä–æ–ø—É—â–µ–Ω–æ');
        
        // –ü—Ä–æ–≤–µ—Ä—è–µ–º –ª–æ–≥–∏–∫—É –∑–∞—â–∏—Ç—ã –æ—Ç –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏—è
        console.log('\nüîç –ü—Ä–æ–≤–µ—Ä–∫–∞ –ª–æ–≥–∏–∫–∏ –∑–∞—â–∏—Ç—ã –æ—Ç –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏—è:');
        
        // –¢–µ—Å—Ç 1: –î–æ—Å—Ç–∏–∂–µ–Ω–∏—è
        console.log('\n1Ô∏è‚É£ –¢–µ—Å—Ç –¥–æ—Å—Ç–∏–∂–µ–Ω–∏–π:');
        if (testProfileData.achievements !== undefined) {
            console.log('‚úÖ –î–æ—Å—Ç–∏–∂–µ–Ω–∏—è —É–∂–µ –æ–±—Ä–∞–±–æ—Ç–∞–Ω—ã, –ø–µ—Ä–µ—Ö–æ–¥ –∫ –∑–∞—Ä–ø–ª–∞—Ç–µ');
        } else {
            console.log('‚ùå –î–æ—Å—Ç–∏–∂–µ–Ω–∏—è –Ω–µ –æ–±—Ä–∞–±–æ—Ç–∞–Ω—ã, –ø–æ–∫–∞–∑—ã–≤–∞–µ–º –≤–æ–ø—Ä–æ—Å');
        }
        
        // –°–∏–º—É–ª–∏—Ä—É–µ–º –ø—Ä–æ–ø—É—Å–∫ –¥–æ—Å—Ç–∏–∂–µ–Ω–∏–π
        testProfileData.achievements = null;
        console.log('   –ü–æ—Å–ª–µ –ø—Ä–æ–ø—É—Å–∫–∞:');
        if (testProfileData.achievements !== undefined) {
            console.log('‚úÖ –î–æ—Å—Ç–∏–∂–µ–Ω–∏—è –æ–±—Ä–∞–±–æ—Ç–∞–Ω—ã (–ø—Ä–æ–ø—É—â–µ–Ω—ã), –ø–µ—Ä–µ—Ö–æ–¥ –∫ –∑–∞—Ä–ø–ª–∞—Ç–µ');
        } else {
            console.log('‚ùå –î–æ—Å—Ç–∏–∂–µ–Ω–∏—è –Ω–µ –æ–±—Ä–∞–±–æ—Ç–∞–Ω—ã');
        }
        
        // –¢–µ—Å—Ç 2: –ó–∞—Ä–ø–ª–∞—Ç–∞
        console.log('\n2Ô∏è‚É£ –¢–µ—Å—Ç –∑–∞—Ä–ø–ª–∞—Ç—ã:');
        if (testProfileData.salary_range !== undefined) {
            console.log('‚úÖ –ó–∞—Ä–ø–ª–∞—Ç–∞ —É–∂–µ –æ–±—Ä–∞–±–æ—Ç–∞–Ω–∞, –ø–µ—Ä–µ—Ö–æ–¥ –∫ –∫–æ–Ω—Ç–∞–∫—Ç–∞–º');
        } else {
            console.log('‚ùå –ó–∞—Ä–ø–ª–∞—Ç–∞ –Ω–µ –æ–±—Ä–∞–±–æ—Ç–∞–Ω–∞, –ø–æ–∫–∞–∑—ã–≤–∞–µ–º –≤–æ–ø—Ä–æ—Å');
        }
        
        // –°–∏–º—É–ª–∏—Ä—É–µ–º –ø—Ä–æ–ø—É—Å–∫ –∑–∞—Ä–ø–ª–∞—Ç—ã
        testProfileData.salary_range = null;
        console.log('   –ü–æ—Å–ª–µ –ø—Ä–æ–ø—É—Å–∫–∞:');
        if (testProfileData.salary_range !== undefined) {
            console.log('‚úÖ –ó–∞—Ä–ø–ª–∞—Ç–∞ –æ–±—Ä–∞–±–æ—Ç–∞–Ω–∞ (–ø—Ä–æ–ø—É—â–µ–Ω–∞), –ø–µ—Ä–µ—Ö–æ–¥ –∫ –∫–æ–Ω—Ç–∞–∫—Ç–∞–º');
        } else {
            console.log('‚ùå –ó–∞—Ä–ø–ª–∞—Ç–∞ –Ω–µ –æ–±—Ä–∞–±–æ—Ç–∞–Ω–∞');
        }
        
        // –¢–µ—Å—Ç 3: –ö–æ–Ω—Ç–∞–∫—Ç—ã
        console.log('\n3Ô∏è‚É£ –¢–µ—Å—Ç –∫–æ–Ω—Ç–∞–∫—Ç–æ–≤:');
        if (testProfileData.contacts !== undefined) {
            console.log('‚úÖ –ö–æ–Ω—Ç–∞–∫—Ç—ã —É–∂–µ –æ–±—Ä–∞–±–æ—Ç–∞–Ω—ã, —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –ø—Ä–æ—Ñ–∏–ª—è');
        } else {
            console.log('‚ùå –ö–æ–Ω—Ç–∞–∫—Ç—ã –Ω–µ –æ–±—Ä–∞–±–æ—Ç–∞–Ω—ã, –ø–æ–∫–∞–∑—ã–≤–∞–µ–º –≤–æ–ø—Ä–æ—Å');
        }
        
        // –°–∏–º—É–ª–∏—Ä—É–µ–º –ø—Ä–æ–ø—É—Å–∫ –∫–æ–Ω—Ç–∞–∫—Ç–æ–≤
        testProfileData.contacts = null;
        console.log('   –ü–æ—Å–ª–µ –ø—Ä–æ–ø—É—Å–∫–∞:');
        if (testProfileData.contacts !== undefined) {
            console.log('‚úÖ –ö–æ–Ω—Ç–∞–∫—Ç—ã –æ–±—Ä–∞–±–æ—Ç–∞–Ω—ã (–ø—Ä–æ–ø—É—â–µ–Ω—ã), —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –ø—Ä–æ—Ñ–∏–ª—è');
        } else {
            console.log('‚ùå –ö–æ–Ω—Ç–∞–∫—Ç—ã –Ω–µ –æ–±—Ä–∞–±–æ—Ç–∞–Ω—ã');
        }
        
        console.log('\n‚úÖ –í–°–ï –¢–ï–°–¢–´ –ó–ê–í–ï–†–®–ï–ù–´');
        console.log('\nüìù –û–∂–∏–¥–∞–µ–º–æ–µ –ø–æ–≤–µ–¥–µ–Ω–∏–µ:');
        console.log('- –ü—Ä–∏ –ø—Ä–æ–ø—É—Å–∫–µ –ø–æ–ª—è —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç—Å—è –≤ null');
        console.log('- –ü–æ–ª–µ –ø–æ–º–µ—á–∞–µ—Ç—Å—è –∫–∞–∫ –æ–±—Ä–∞–±–æ—Ç–∞–Ω–Ω–æ–µ (–Ω–µ undefined)');
        console.log('- –ü—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –ø–µ—Ä–µ—Ö–æ–¥ –∫ —Å–ª–µ–¥—É—é—â–µ–º—É —à–∞–≥—É');
        console.log('- –í–æ–ø—Ä–æ—Å –±–æ–ª—å—à–µ –Ω–µ –¥—É–±–ª–∏—Ä—É–µ—Ç—Å—è');
        
    } catch (error) {
        console.error('‚ùå –û—à–∏–±–∫–∞ –ø—Ä–∏ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–∏:', error);
    } finally {
        await pool.end();
    }
}

// –ó–∞–ø—É—Å–∫–∞–µ–º —Ç–µ—Å—Ç
testProfileSkipBehavior(); 